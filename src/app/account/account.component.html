<body>
  <main class="main">
    <div class="container">
      <div class="top-head-blog">
        <div class="text-center">
          <h2 class="font-4xl-bold">Mon profil</h2>
        </div>
      </div>
      <div class="row mb-80">
        <div class="col-lg-10 m-auto">
          <div class="row">
            <div class="col-md-3">
              <div class="dashboard-menu">
                <ul class="nav flex-column" role="tablist">
                  <li class="nav-item">
                    <a class="nav-link active" id="dashboard-tab" data-bs-toggle="tab" href="#dashboard"><i
                        class="fi-rs-settings-sliders mr-10"></i>Tableau de bord</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" id="orders-tab" data-bs-toggle="tab" href="#orders"><i
                        class="fi-rs-shopping-bag mr-10"></i>Commandes</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" id="account-detail-tab" data-bs-toggle="tab" href="#account-detail"><i
                        class="fi-rs-user mr-10"></i>Informations personnelles</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" id="account-detail-tab" data-bs-toggle="tab" (click)="logout()"><i class="fi-rs-sign-out mr-10"></i>Logout</a>
                  </li>
                </ul>
              </div>
            </div>

            <div class="col-md-9">
              <div class="tab-content account dashboard-content pl-50">
                <!-- Dashboard -->
                <div class="tab-pane fade active show" id="dashboard">
                  <div class="card">
                    <div class="card-header">
                      <h3 class="mb-0">Bonjour {{ user.name }}!</h3>
                    </div>
                    <div class="card-body">
                      <p>
                        Depuis votre tableau de bord, vous pouvez facilement consulter et voir vos
                        commandes récents, ainsi que
                        modifier votre mot de passe et les détails de votre compte.
                      </p>
                    </div>
                  </div>
                </div>

                <!-- Orders -->
                <div class="tab-pane fade" id="orders">
                  <div class="card">
                    <div class="card-header">
                      <h3 class="mb-0">Vos commandes </h3>
                    </div>
                    <div class="card-body">
                      <div class="table-responsive">
                        <p *ngIf="errorMessage">{{ errorMessage }}</p>
                        <table class="table">
                          <thead>
                            <tr>
                              <th>Commande</th>
                              <th>Date</th>
                              <th>Status</th>
                              <th>Total</th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr *ngFor="let order of orders">
                              <td>#{{ order.id }}</td>
                              <td>{{ order.created_at | date:'dd/MM/yy' }}</td>
                              <td>{{ order.status | status }}</td>
                              <td>{{ order.total }} TND</td>
                            </tr>
                          </tbody>
                        </table>
                        <p *ngIf="orders.length === 0">Aucune commande trouvée.</p>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Account Details -->
                <div class="tab-pane fade" id="account-detail">
                  <div class="card">
                    <div class="card-header">
                      <h5>Account Details</h5>
                    </div>
                    <div class="card-body">
                      <form>
                        <div class="row">
                          <div class="form-group col-md-6">
                            <label>Nom</label>
                            <input class="form-control" [(ngModel)]="user.name" name="name">
                          </div>
                          <div class="form-group col-md-12">
                            <label>Email</label>
                            <input class="form-control" [(ngModel)]="user.email" name="email" type="email">
                          </div>
                          <div class="form-group col-md-12">
                            <label>Mot de passe actuel</label>
                            <input class="form-control" [(ngModel)]="passwords.current_password" name="current_password"
                              type="password">
                          </div>
                          <div class="form-group col-md-12">
                            <label>Nouveau mot de passe</label>
                            <input class="form-control" [(ngModel)]="passwords.new_password" name="new_password"
                              type="password">
                          </div>
                          <div class="form-group col-md-12">
                            <label>Confirmer le nouveau mot de passe</label>
                            <input class="form-control" [(ngModel)]="passwords.confirm_password" name="confirm_password"
                              type="password">
                          </div>
                        </div>
                        <div class="col-md-12">
                          <div class="form-group">
                            <button class="btn btn-brand-1-medium" type="button" (click)="updateProfile()">enregistrer les modifications</button>
                          </div>
                        </div>
                      </form>
                      <p *ngIf="errorMessage" class="alert alert-danger">{{ errorMessage }}</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>
</body>